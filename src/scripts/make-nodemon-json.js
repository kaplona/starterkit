'use strict';

const path = require('path');
const FileWriter = require('../tools/file-writer');
const AppPaths = require('../config/app-paths');


const nodemonConfig = {
    '////': '//',
    '///': 'WARNING: This file is generated by ' + path.basename(__filename) + ' - do not edit manually!',
    '//': '////',
    verbose: true,
    ext: 'js jsx',
    env: {
        NODE_ENV: process.env.NODE_ENV
    },
    delay: 200, // an extra throttle to delay restarting
    ignore: [
        '.idea',
        '.sass-cache',
        path.relative(AppPaths.root, AppPaths.components) + '/*', // ignore frontend files to minimize server restarts
        path.relative(AppPaths.root, AppPaths.webRoot) + '/*' // ignore compiled bundles & static frontend files
    ]
};


module.exports = function () {
    return FileWriter.write('nodemon.json', JSON.stringify(nodemonConfig, null, 2));
};